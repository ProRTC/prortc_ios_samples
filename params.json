{
  "name": "Prortc ios samples",
  "tagline": "",
  "body": "<br>\r\n<p align=\"center\" >\r\n  <img src=\"ProRTC_logo.png\" height=\"101\" alt=\"ProRTC\" title=\"ProRTC\">\r\n</p>\r\n<br>\r\n# ProRTC iOS Sample - A WebRTC Solution for iOS\r\n\r\nProRTC library provides the infrastructure needed to integrate Google native WebRTC in iOS apps. \r\nIt is a layer handcrafted over WebRTC native trunk code to obtain audio/video conferencing, text-chat, file sharing and other cool stuff.\r\n\r\nProRTC iOS sample helps you to better understand the features of ProRTC library and demonstrates basic integration steps for providing support for the following features in your iPhone/iPad apps:\r\n\r\n - 1x1 Video conferencing.\r\n - Text messaging.\r\n - Data channels support.\r\n\r\n# If you have any feedback, doubts or feature request, feel free and email us at support@prortc.com\r\n\r\n# Project Setup\r\n\r\nThe ProRTC library requires **Xcode 7+**.\r\n\r\nImport ProRTC library folder into your project which contains:\r\n* libProRTCCore.a\r\n* libProRTC.a\r\n* Headers\r\n\r\nYou can easily find these files in this sample project.\r\n\r\nThe ProRTC library requires the following frameworks and libraries:\r\n* UIKit.framework\r\n* GLKit.framework\r\n* CoreMedia.framework\r\n* CoreGraphics.framework\r\n* CoreVideo.framework\r\n* AVFoundation.framework\r\n* Foundation.framework\r\n* Security.framework\r\n* CFNetwork.framework\r\n* AudioToolbox.framework\r\n* VideoToolbox.framework\r\n* CoreVideo.framework\r\n* CoreAudio.framework\r\n* OpenGLES.framework\r\n* QuartzCore.framework\r\n* libsqlite3.dylib\r\n* libSystem.B.dylib\r\n* libstdc++.6.0.9.dylib\r\n* libicucore.A.dylib\r\n* libc++.1.dylib\r\n\r\n**Final step: Other linker flag**\r\n\r\n**libProRTC.a** includes few Objective-C categories of **WebRTC.framework** classes so we need to make sure that linker loads all categories and classes of static library properly:\r\n\r\nGoto your project **Build settings** and add **-ObjC** flag in **Other linker flag** section.\r\n\r\n### All done! üòé\r\n\r\n# Requirements\r\n\r\n**BUILD REQUIREMENTS:**\r\n\r\niOS SDK 9.0 or later\r\n\r\n**RUNTIME REQUIREMENTS:**\r\n\r\niOS 9.0 or later\r\n\r\nSupported on **Wi-Fi** and **3G/4G/LTE** connections.\r\n\r\n# Architecture\r\n\r\n### Class References\r\n- `PWMediaSession`\r\n- `PWMediaConfiguration`\r\n- `PWDataFile`\r\n- `PWRemotePeer`\r\n- `PWRoom`\r\n\r\n### Protocol References\r\n- `PWMediaSessionDelegate`\r\n\r\n### Constant References\r\n- `PWAudioCodec`\r\n- `PWCameraPosition`\r\n- `PWConnectionState`\r\n- `PWPixelFormat`\r\n- `PWRendererType`\r\n- `PWVideoCodec`\r\n- `kWebSocketErrorCode`\r\n\r\n### Category References\r\n- `RTCMediaStream(Configuration)`\r\n- `RTCVideoTrack(Renderer)`\r\n\r\n# Usage\r\n\r\nBefore getting started, let‚Äôs discuss some of the most important classes you‚Äôll be using in this project:\r\n\r\n### PWMediaSession\r\nThe `PWMediaSession` class manages the execution of WebRTC operations such as: handling `offer/answer`, `ICE`, renegotiation, data transfer and other media activities.\r\n\r\n`PWMediaSession‚Äôs` delegate methods‚Äîdefined by the `PWMediaSessionDelegate` protocol‚Äîallow an object to receive callbacks regarding the success or failure of an operation.\r\n\r\n### PWMediaConfiguration\r\nThe `PWMediaConfiguration` class manages Media properties and configuration.\r\n\r\n`PWMediaConfiguration` provides support for the following features:\r\n\r\n- Rendering.\r\n- Audio/Video codecs.\r\n- Audio/Video bandwidth control.\r\n- Frame rate & pixel formats.\r\n- Computes prefered receiving video format on the basis of device capabilities and performance.\r\n\r\n### Initialization\r\n\r\nImport ProRTC library header file:\r\n```objective-c\r\n#import \"ProRTC.h\"\r\n```\r\n\r\n`PWMediaSession` is the main class used to perform WebRTC operations. Your class must conforms its protocol `PWMediaSessionDelegate`.\r\n\r\n```objective-c\r\n@interface ViewController () <PWMediaSessionDelegate>\r\n\r\n@end\r\n```\r\n\r\n* `PWMediaSessionDelegate` - Handles events when remote client connects and disconnect states. Also, handles events when local and remote video feeds are received.\r\n\r\nCreate a property of `PWMediaSession`, using this session you'll be doing all WebRTC operations.\r\n```objective-c\r\n@property (strong, nonatomic) PWMediaSession *mediaSession;\r\n```\r\n\r\n### Rendering\r\n\r\n`RTCEAGLVideoView` is used for rendering of Local and Remote videos so create two properties of `RTCEAGLVideoView`.\r\n- One for `Remote`.\r\n- One for `Local`.\r\n\r\nYou can also use `storyboard`, create two simple `UIView`'s and set `RTCEAGLVideoView` as a `Custom class`.\r\n\r\n```objective-c\r\n// remoteVideoView: An object of RTCEAGLVideoView to show remote video.\r\n@property (weak, nonatomic) IBOutlet RTCEAGLVideoView *remoteVideoView;\r\n\r\n// localVideoView: An object of RTCEAGLVideoView to show local camera video.\r\n@property (weak, nonatomic) IBOutlet RTCEAGLVideoView *localVideoView;\r\n```\r\n\r\nFor handling received media data - create properties of `RTCVideoTrack`: \r\n\r\n```objective-c\r\n// RTCVideoTrack objects to hold local and remote videos data.\r\n@property (strong, nonatomic) RTCVideoTrack *localVideoTrack;\r\n@property (strong, nonatomic) RTCVideoTrack *remoteVideoTrack;\r\n```\r\n### Go Live\r\n\r\n```objective-c\r\n// Initialize session.\r\nself.mediaSession = [PWMediaSession sharedInstance];\r\n\r\n// Start video call.\r\n// @param: room name or any unique identifier.\r\n// @param: participant id --\r\n// @param: participant name --\r\n// @param: delegate <PWMediaSessionDelegate>\r\n//\r\n// It's just a sample and we're not maintaining user data so [NSUUID UUID] is a best option for unique id of participant.\r\n// You can pass your own values If you want.\r\n//\r\n    \r\nNSString *GUID = [NSUUID UUID].UUIDString;\r\nNSString *name = [UIDevice currentDevice].name;\r\n    \r\n[self.mediaSession startVideoCall:self.roomName participant:GUID displayName:name delegate:self];\r\n\r\n```\r\n<br>\r\n<b>Video call with custom media configuration:</b>\r\nYou can change these properties according to your requirement. If you do not - By default best configuration will be used.\r\n\r\nFor more details: see `PWMediaConfiguration.h`\r\n\r\n```objective-c\r\n//\r\n// Default media configuration:\r\n//\r\n// Audio codec: Opus audio codec (good quality)\r\n// Audio bandiwidth limit: 64\r\n// Video codec: Software (VP8)\r\n// Video renderer: OpenGLES 2.0\r\n// Video bandwidth limit: 512 // must be greater than 300, If you really want to see other participant's face. :P\r\n// Video format: 640 x 480\r\n// Frame rate: @30 // varies according to the device performance.\r\n// Camera position: front\r\n//\r\nPWMediaConfiguration *config = [PWMediaConfiguration defaultConfiguration];\r\n\r\n[self.mediaSession startVideoCall:self.roomName participant:GUID displayName:name delegate:self configuration:config];\r\n\r\n```\r\n<br>\r\n<b>For Audio only call:</b>\r\n```objective-c\r\n[self.mediaSession startAudioCall:self.roomName participant:GUID displayName:name delegate:self];\r\n```\r\n### Delegates\r\n\r\n<b>Connection state:</b>\r\n```objective-c\r\n- (void)mediaSession:(PWMediaSession *)session didChangeState:(PWConnectionState)state\r\n{\r\n    switch (state) {\r\n        case PWConnectionStateConnecting:\r\n            // connecting...\r\n            break;\r\n        case PWConnectionStateConnected:\r\n            // connected...\r\n            break;\r\n        case PWConnectionStateDisconnected:\r\n            // disconnected...\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\n- (void)mediaSession:(PWMediaSession *)session didConnectToRoom:(PWRoom *)room\r\n{\r\n    // successfully connected to room...\r\n}\r\n```\r\n\r\n<b>A/V:</b>\r\n```objective-c\r\n- (void)mediaSession:(PWMediaSession *)session didAddLocalStream:(RTCMediaStream *)localStream\r\n{\r\n    // No need of rendering in case of audio conferencing.\r\n    if (localStream.isVideoTrackAvailable) {\r\n        \r\n        // save video track of media stream.\r\n        self.localVideoTrack = localStream.videoTracks[0];\r\n        \r\n        // start rendering of local camera video.\r\n        [self.localVideoTrack bindRendererView:self.localVideoView];\r\n    }\r\n}\r\n\r\n- (void)mediaSession:(PWMediaSession *)session didAddRemoteStream:(RTCMediaStream *)remoteStream ofPeer:(PWRemotePeer *)remotePeer\r\n{\r\n    // No need of rendering in case of audio conferencing.\r\n    if (remoteStream.isVideoTrackAvailable) {\r\n        \r\n        // save video track of media stream.\r\n        self.remoteVideoTrack = remoteStream.videoTracks[0];\r\n        \r\n        // start rendering of remote camera video.\r\n        [self.remoteVideoTrack bindRendererView:self.remoteVideoView];\r\n    }\r\n}\r\n```\r\n\r\n<b>Failure:</b>\r\n```objective-c\r\n- (void)mediaSession:(PWMediaSession *)session didFailWithError:(NSError *)error\r\n{\r\n    // For performing different operations on different error.\r\n    // @See: kWebSocketErrorCode (defined in PWTypes.h)\r\n}\r\n```\r\n\r\n### ‚≠ê Text messaging and Data transfer\r\n\r\n<b>ProRTC</b> uses `Data Channels` for transferring any type of data, with the help of datachannels you can transfer files or even you can also send text messages.\r\nIf datachannels are not enabled, file sharing will not work but text messaging will.\r\nBy default session checks, If datachannels are enabled private messages will be sent through channels not server.\r\nIf disabled, messages will be sent through server.\r\n\r\nYou can use this feature by simply adding one line of code üòâ\r\n\r\n```objective-c\r\nPWMediaSessionEnableDataChannels(YES);\r\n```\r\n<b>NOTE:</b> This line of code must be written before initiating call. Do not forget to disbale it, If not using, It'll save processing time.\r\n\r\nFile transfer is a very important and little bit complex part of communication. In <b>ProRTC</b> we've focused on so many points to make this feature easy to integrate.\r\n\r\nDevelopers want to know everything:\r\n- When file sending process started.\r\n- How much data is sent or received.\r\n- When file receiving process finished. and much more\r\n\r\nSo we've provided functions and properties to handle this giant process. We're regularly working on this to make it more simpler but as of now lets see what we have:\r\n\r\n<br>\r\n<b>Sending Text message</b>\r\n```objective-c\r\n[self.mediaSession sendMessage:message.text toPeer:<recipient_id>];\r\n```\r\n\r\n<b>Sending file</b>\r\n```objective-c\r\n[self.mediaSession sendFileData:<NSData> withFileName:<fileName> ofType:<fileExt> toPeer:<recipient_id> streamId:[NSUUID UUID].UUIDString];\r\n```\r\n<b>NOTE:</b> If `Data channels` are not enabled, this method won't work.\r\n<br><b>PERFORMANCE:</b> Sending large files required needs great Internet speed. Keep it in mind If network speed is slow do not try to send large files OR multiple files at the same time, It'll degrade your video call performance. If not using <b>Wi-Fi</b>: data charges may apply.\r\n\r\n<br>\r\n### Delegates\r\n<b>Called when `session` receives new Text message in room (Common for both public/private messages)</b>\r\n```objective-c\r\n- (void)mediaSession:(PWMediaSession *)session didReceiveTextMessage:(NSString *)message ofPeer:(PWRemotePeer *)remotePeer\r\n{\r\n    // message: text message.\r\n    // remotePeer: sender of message.\r\n}\r\n```\r\n<br>\r\n<b>Called only once when `session` starts receiving new file</b> - `PWDataFile` object holds all the information of incoming file.\r\nEach file transfer process is represented by unique identifier `data_id` (defined in `PWDataFile.h`), you can use this `data_id` to identify which operation is for which file.\r\n```objective-c\r\n- (void)mediaSession:(PWMediaSession *)session didStartReceivingDocument:(PWDataFile *)document\r\n{\r\n\r\n}\r\n```\r\n<b>NOTE:</b> In this delegate, you may not be able to get few details of file because file is not received yet!\r\n\r\n<br>\r\n<b>Called when `session` successfully received file</b>\r\n\r\n```objective-c\r\n- (void)mediaSession:(PWMediaSession *)session didFinishReceivingDocument:(PWDataFile *)document atURL:(NSURL *)url ofPeer:(PWRemotePeer *)remotePeer\r\n{\r\n  // document: object of received file.\r\n  // url: path of document directory where received file is saved.\r\n  // remotePeer: sender of file.\r\n}\r\n```\r\n<br>\r\n<b>Sending/Receiving Progress: This is a big one üòÉ</b>\r\nAbove two delegate tells about start/finish but what about the scene in between, don't worry we have functions for this too üòâ\r\n\r\n<b>Receiving progress</b>\r\n\r\nFor getting file receiving progress, add this property block - Callback when file receiving progress changes.\r\n\r\n```objective-c\r\nself.mediaSession.onDocumentReceivingProgress = ^ (PWDataFile *document, float progress) {\r\n    // find your file object using predicate or some other way \r\n    // which you've saved previously in <didStartReceivingDocument> method.\r\n    // update progress.\r\n};\r\n```\r\n\r\n<b>Sending progress</b>\r\n\r\nFor getting file sending progress, add this property block - Callback when file sending progress changes.\r\n\r\n```objective-c\r\nself.mediaSession.onDocumentSendingProgress = ^(NSString *data_id, float progress) {\r\n    \r\n};\r\n```\r\n<b>NOTE:</b> This block doesn't return `PWDataFile` object because you're the sender and you should have all the information about your file. It only tells you how much data you've sent and how much is remaining.\r\n<br>\r\n### Extras üòé\r\n\r\n<b>To check Audio/Video access permission</b>\r\n\r\n```objective-c\r\nif (self.mediaSession.videoAuthorized) {\r\n\r\n}\r\n\r\nif (self.mediaSession.audioAuthorized) {\r\n\r\n}\r\n```\r\n\r\n<b>Use this to stop device to going in sleep mode during conferencing</b>\r\n<br>default is `NO`\r\n\r\n```objective-c\r\n[self.mediaSession setIdleTimerDisabled:YES];\r\n```\r\nDon't forget to reset it in your `End call` action or in `AppDelegate` methods `applicationDidEnterBackground` OR `applicationWillTerminate` by simply using this line of code:\r\n * `[[UIApplication sharedApplication] setIdleTimerDisabled:NO];` OR\r\n * `[self.mediaSession setIdleTimerDisabled:NO];`\r\n \r\n<b>Switching Camera</b>\r\n\r\n```objective-c\r\nif (self.mediaSession.cameraPosition == PWCameraPositionFront) {\r\n    [self.mediaSession switchCameraPosition:PWCameraPositionBack];\r\n}\r\nelse {\r\n      [self.mediaSession switchCameraPosition:PWCameraPositionFront];\r\n}\r\n```\r\n\r\n<b>Mute/UnMute A/V</b>\r\n\r\n```objective-c\r\n[self.mediaSession stopMic];\r\n[self.mediaSession startMic];\r\n\r\n[self.mediaSession stopCamera];\r\n[self.mediaSession startCamera];\r\n```\r\n\r\n<br>\r\n<b>For More Details: See `PWMediaSession.h`</b>\r\n\r\n## Contributing\r\nIf you want to contribute in WebRTC era, share your ideas, changes and modifications to provide more benifits to developers.\r\n\r\n## üîß Known Issues\r\nNone at this time.\r\n\r\n## üëë Author\r\n[Codiant Software Technology Pvt Ltd](http://www.codiant.com).\r\n\r\n## üìÑ Change Log\r\n### See [Changelog.md](https://github.com/ProRTC/prortc_ios_samples/blob/master/CHANGELOG.md)\r\n\r\n## License\r\nYou're free to copy and modify the source code of ProRTC sample project for your own projects. See LICENSE for details.\r\n\r\n# If you have any feedback, doubts or feature request, feel free and email us at support@prortc.com\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}